<h1>New Visit</h1>

<%= form_with model: @visit, url: visits_path, local: true do |form| %>
  <div>
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div>
    <%= form.label :address %>
    <%= form.text_field :address %>
  </div>

  <div>
    <%= form.label :category_ids, 'Categories' %><br>
    <% Category.all.each do |category| %>
      <%= form.check_box :category_ids, { multiple: true }, category.id, nil %>
      <%= category.name %><br>
      <%= form.fields_for 'category[ratings][]', category.ratings.build do |rating_fields| %>
        <%= rating_fields.label :value, 'Rating (0-10)' %>
        <%= rating_fields.number_field :value, in: 0..10, step: 1 %>
      <% end %>
    <% end %>
  </div>

  <%= form.hidden_field :user_id, value: User.first.id %>

  <%= form.fields_for :comment, class:'form' do |comment_field| %>
    <div class="form-group">
      <p>Comment:</p>
      <%= comment_field.text_field :text, class:"form-control" %>
    </div>
  <% end %>

  <div>
    <%= form.label :images %>
    <%= form.file_field :images, multiple: true %>
  </div>

  <div>
    <%= form.submit 'Create Place' %>
  </div>
<% end %>

<%= link_to 'Back', root_path %>
